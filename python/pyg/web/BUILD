python_binary(
    name='app',
    source='app.py',
    dependencies=[
	':exceptions',
        ':api',
        ':views',
        ':container',
        ':plugin',
	':models',
	':db',
	':testing',
	':auth',
        'third_party:flask',
	'third_party:psycopg2',
	'third_party:setuptools',
	'third_party:flask-login',
	':templates',
	':static',
    ],
)

python_library(
    name='exceptions',
    sources=[
        'exceptions.py',
    ],
    dependencies=[],
)

python_library(
    name='api',
    sources=[
        'api.py',
    ],
    dependencies=[
        ':models',
	':db',
    ],
)

python_library(
    name='auth',
    sources=[
        'auth.py',
    ],
    dependencies=[
        ':db',
	':models',
	'third_party:marshmallow',
    ],
)

python_library(
    name='testing',
    sources=[
        'testing.py',
    ],
    dependencies=[
        ':models',
	':db',
    ],
)

python_library(
    name='plugin',
    sources=[
        'plugin.py',
    ],
    dependencies=[
        'third_party:sqlalchemy',
    ],
)

python_library(
    name='views',
    sources=['views/*.py'],
    dependencies=[
        'third_party:flask',
	'third_party:psycopg2',
        'third_party:marshmallow'
    ],
)

python_library(
    name='models',
    sources=[
        'models.py',
    ],
    dependencies=[
        'third_party:sqlalchemy',
    ],
)  

python_library(
    name='container',
    sources=[
        'container.py',
    ],
    dependencies=[
        'third_party:oscar.flag',
        'third_party:twisted',
        'third_party:werkzeug',
    ],
)

python_library(
    name='db',
    sources=[
	'db.py',
    ],
    dependencies=[
        ':plugin',
    ],
)

resources(
    name='templates',
    sources=['templates/*']
)

resources(
    name='static',
    sources=['static/*']
)