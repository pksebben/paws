python_binary(
    name='app',
    source='app.py',
    dependencies=[
        ':api',
        ':container',
        ':plugin',
	':models',
	':db',
        'third_party:flask',
	'third_party:psycopg2',
	'third_party:setuptools',
	':templates',
	':static',
    ],
)

python_library(
    name='plugin',
    sources=[
        'plugin.py',
    ],
    dependencies=[
        'third_party:sqlalchemy',
    ],
)

python_library(
    name='api',
    sources=[
        'api.py',
    ],
    dependencies=[
        'third_party:flask',
	'third_party:psycopg2',
        'third_party:marshmallow'
    ],
)

python_library(
    name='models',
    sources=[
        'models.py',
    ],
    dependencies=[
        'third_party:sqlalchemy',
    ],
)  

python_library(
    name='container',
    sources=[
        'container.py',
    ],
    dependencies=[
        'third_party:oscar.flag',
        'third_party:twisted',
        'third_party:werkzeug',
    ],
)

python_library(
    name='db',
    sources=[
	'db.py',
    ],
    dependencies=[
        ':plugin',
    ],
)

resources(
    name='templates',
    sources=rglobs('templates/*')
)

resources(
    name='static',
    sources=rglobs('static/*')
)